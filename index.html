<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=yes,viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <title>TimeSnap</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@700&family=Playfair+Display:wght@900&family=Orbitron:wght@700&family=Roboto+Mono:wght@700&family=Share+Tech+Mono&family=Anton&family=Bebas+Neue&family=Audiowide&display=swap" rel="stylesheet">
<style>
:root{--bg-dark:#C45CA8;--accent-primary:#000;--accent-secondary:#1a1a1a;--text-light:#000;--text-dim:#333;--panel-bg:rgba(255,255,255,.95);--panel-border:rgba(0,0,0,.2)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'JetBrains Mono',monospace;background:var(--bg-dark);color:var(--text-light);overflow-x:hidden;min-height:100vh;-webkit-user-select:none;user-select:none;-webkit-touch-callout:none}
button,input,select,label{-webkit-user-select:none;user-select:none}
.background-layer{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;overflow:hidden;background:#C45CA8}
.background-image{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;opacity:0;transition:opacity .5s ease;z-index:1}
.black-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:#000;opacity:0;z-index:2;pointer-events:none;transition:opacity .3s ease}
.container{position:relative;z-index:1;min-height:100vh;display:flex;flex-direction:column}
header{padding:2rem;display:flex;justify-content:space-between;align-items:center;animation:slideDown .6s ease}
.logo{font-family:'Playfair Display',serif;font-size:2rem;font-weight:900;color:#000;letter-spacing:-1px}
.mode-toggle{display:flex;gap:.5rem;background:var(--panel-bg);padding:.5rem;border-radius:50px;border:1px solid var(--panel-border);backdrop-filter:blur(10px)}
.mode-btn{padding:.5rem 1.5rem;background:transparent;color:var(--text-dim);border:none;border-radius:50px;cursor:pointer;transition:all .3s ease;font-family:'JetBrains Mono',monospace;font-size:.9rem;font-weight:700;-webkit-tap-highlight-color:rgba(0,0,0,.1);-webkit-appearance:none;appearance:none;touch-action:manipulation}
.mode-btn.active{background:#000;color:#fff;box-shadow:0 4px 15px rgba(0,0,0,.3)}
.timer-section{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:2rem;animation:fadeIn .8s ease .2s both}
.timer-display{font-family:'JetBrains Mono',monospace;font-size:clamp(4rem,15vw,12rem);font-weight:700;line-height:1;text-align:center;color:#000;margin-bottom:3rem;letter-spacing:.05em;text-shadow:none}
.fullscreen-mode .timer-display{margin-bottom:0}
.controls{display:flex;gap:1.5rem;margin-bottom:2rem;flex-wrap:wrap;justify-content:center}
.control-btn{padding:1rem 2.5rem;background:var(--panel-bg);color:var(--text-light);border:2px solid var(--panel-border);border-radius:12px;cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:1rem;font-weight:700;backdrop-filter:blur(10px);transition:all .3s ease;text-transform:uppercase;letter-spacing:1px;-webkit-tap-highlight-color:rgba(0,0,0,.1);-webkit-appearance:none;appearance:none;touch-action:manipulation}
.control-btn:hover{border-color:var(--accent-primary);box-shadow:0 0 20px rgba(0,0,0,.2);transform:translateY(-2px)}
.control-btn.primary{background:#000;border-color:transparent;color:#fff}
.control-btn.primary:hover{box-shadow:0 0 30px rgba(0,0,0,.3)}
.settings-toggle-btn{margin-top:1rem;padding:1rem 2.5rem;background:var(--panel-bg);color:var(--text-light);border:2px solid var(--panel-border);font-size:1rem;font-weight:700;display:flex;align-items:center;gap:.5rem;justify-content:center;border-radius:12px;cursor:pointer;font-family:'JetBrains Mono',monospace;transition:all .3s ease;text-transform:uppercase;letter-spacing:1px;-webkit-tap-highlight-color:rgba(0,0,0,.1);-webkit-appearance:none;appearance:none;touch-action:manipulation;width:auto;min-width:200px}
.settings-toggle-btn:hover{background:rgba(0,0,0,.05);border-color:#000;transform:translateY(-2px)}
.settings-panel{background:var(--panel-bg);border:1px solid var(--panel-border);border-radius:16px;padding:2rem;max-width:500px;width:100%;backdrop-filter:blur(10px);animation:slideUp .6s ease both;-webkit-backdrop-filter:blur(10px);max-height:70vh;overflow-y:auto;overflow-x:hidden;margin-top:1.5rem;scrollbar-width:thin;scrollbar-color:rgba(0,0,0,.3) rgba(0,0,0,.05)}
.settings-panel::-webkit-scrollbar{width:10px}
.settings-panel::-webkit-scrollbar-track{background:rgba(0,0,0,.05);border-radius:10px;margin:16px 0}
.settings-panel::-webkit-scrollbar-thumb{background:rgba(0,0,0,.3);border-radius:10px;border:2px solid transparent;background-clip:padding-box}
.settings-panel::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,.5);background-clip:padding-box}
.settings-panel h3{font-family:'Playfair Display',serif;font-size:1.5rem;margin-bottom:1.5rem;color:var(--accent-primary)}
.setting-group{margin-bottom:1.5rem}
.setting-group label{display:block;margin-bottom:.5rem;color:var(--text-dim);font-size:.9rem;text-transform:uppercase;letter-spacing:1px;-webkit-user-select:none;user-select:none}
.time-inputs{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}
.time-input-wrapper{text-align:center}
.time-input-wrapper label{font-size:.75rem;margin-bottom:.25rem}
input[type=number]{width:100%;padding:.75rem;background:rgba(255,255,255,.05);border:1px solid var(--panel-border);border-radius:8px;color:var(--text-light);font-family:'JetBrains Mono',monospace;font-size:1.2rem;text-align:center;transition:all .3s ease}
input[type=number]:focus{outline:0;border-color:var(--accent-primary);box-shadow:0 0 0 3px rgba(0,0,0,.1)}
.custom-select{width:100%;padding:.75rem;background:rgba(255,255,255,.05);border:1px solid var(--panel-border);border-radius:8px;color:var(--text-light);font-family:'JetBrains Mono',monospace;font-size:.9rem;cursor:pointer;transition:all .3s ease}
.custom-select:focus{outline:0;border-color:var(--accent-primary);box-shadow:0 0 0 3px rgba(0,0,0,.1)}
.custom-select option{background:var(--bg-dark);color:var(--text-light)}
.color-selection{display:grid;grid-template-columns:repeat(auto-fit,minmax(50px,1fr));gap:.75rem}
.color-option,.glow-color-option,.bg-color-option{aspect-ratio:1;border-radius:8px;cursor:pointer;border:2px solid transparent;transition:all .3s ease;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,.1);touch-action:manipulation}
.color-option:hover,.glow-color-option:hover,.bg-color-option:hover{border-color:#000;transform:scale(1.1)}
.color-option.active,.glow-color-option.active,.bg-color-option.active{border-color:#000;box-shadow:0 0 15px rgba(0,0,0,.4)}
.color-option.active::after,.glow-color-option.active::after,.bg-color-option.active::after{content:'‚úì';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:1.5rem;font-weight:700;text-shadow:0 0 5px rgba(0,0,0,.8)}
.color-picker-btn{aspect-ratio:1;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,.05);border:2px dashed var(--panel-border);border-radius:8px;cursor:pointer;transition:all .3s ease;font-size:1.5rem;color:var(--text-dim);position:relative;overflow:visible}
.color-picker-btn:hover{border-color:var(--accent-primary);color:var(--accent-primary)}
.color-picker-btn input[type=color]{position:absolute;opacity:0;width:100%;height:100%;cursor:pointer;border:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}
.color-picker-btn span{pointer-events:none;position:relative;z-index:1}
.bg-selection{display:grid;grid-template-columns:repeat(auto-fit,minmax(80px,1fr));gap:.75rem}
.bg-option{aspect-ratio:16/9;border-radius:8px;cursor:pointer;border:2px solid transparent;transition:all .3s ease;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,.1);touch-action:manipulation}
.bg-option:hover{border-color:var(--accent-primary);transform:scale(1.05)}
.bg-option.active{border-color:var(--accent-secondary);box-shadow:0 0 15px rgba(0,0,0,.3)}
.bg-option img{width:100%;height:100%;object-fit:cover}
.bg-option.active::after{content:'‚úì';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:1.5rem;font-weight:700;text-shadow:0 0 5px rgba(0,0,0,.8)}
.image-upload-container{display:flex;justify-content:center}
.image-upload-btn{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.5rem;padding:1.5rem 2rem;background:rgba(0,0,0,.05);border:2px dashed var(--panel-border);border-radius:12px;cursor:pointer;transition:all .3s ease;min-height:100px;width:100%}
.image-upload-btn:hover{border-color:#000;background:rgba(0,0,0,.08);transform:translateY(-2px)}
.upload-icon{font-size:2.5rem}
.upload-text{font-size:.9rem;color:var(--text-dim);font-weight:600;text-transform:uppercase;letter-spacing:.5px}
input[type=file]{display:none}
.opacity-slider{width:100%;height:6px;border-radius:5px;background:linear-gradient(to right,rgba(0,0,0,.1),rgba(0,0,0,.5));outline:0;-webkit-appearance:none;appearance:none}
.opacity-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;border-radius:50%;background:#000;cursor:pointer;box-shadow:0 0 10px rgba(0,0,0,.3);transition:all .3s ease}
.opacity-slider::-webkit-slider-thumb:hover{transform:scale(1.2);box-shadow:0 0 15px rgba(0,0,0,.5)}
.opacity-slider::-moz-range-thumb{width:20px;height:20px;border-radius:50%;background:#000;cursor:pointer;border:none;box-shadow:0 0 10px rgba(0,0,0,.3);transition:all .3s ease}
.opacity-slider::-moz-range-thumb:hover{transform:scale(1.2);box-shadow:0 0 15px rgba(0,0,0,.5)}
.opacity-value{margin-top:.5rem;text-align:center;font-size:1.2rem;color:#000;font-weight:700}
.glow-controls{display:flex;align-items:center;gap:1rem}
.toggle-wrapper{display:flex;align-items:center}
.toggle-checkbox{display:none}
.toggle-label{display:block;position:relative;width:60px;height:30px;background:rgba(255,255,255,.1);border-radius:50px;cursor:pointer;transition:all .3s ease;border:1px solid var(--panel-border)}
.toggle-checkbox:checked+.toggle-label{background:#000;border-color:transparent}
.toggle-switch{position:absolute;top:3px;left:3px;width:22px;height:22px;background:#fff;border-radius:50%;transition:all .3s ease;box-shadow:0 2px 5px rgba(0,0,0,.3)}
.toggle-checkbox:checked+.toggle-label .toggle-switch{left:calc(100% - 25px)}
.fullscreen-btn{position:fixed;bottom:2rem;right:2rem;width:60px;height:60px;border-radius:50%;background:#000;border:none;color:#fff;font-size:1.5rem;cursor:pointer;box-shadow:0 4px 20px rgba(0,0,0,.3);transition:all .3s ease;z-index:1000;display:flex;align-items:center;justify-content:center;-webkit-tap-highlight-color:rgba(0,0,0,.1);-webkit-appearance:none;appearance:none;touch-action:manipulation;line-height:1;padding:0}
.fullscreen-btn:hover{transform:scale(1.1);box-shadow:0 6px 30px rgba(0,0,0,.4)}
.footer-text{position:fixed;bottom:1rem;left:0;right:0;text-align:center;color:#000;font-size:.85rem;font-weight:500;padding:0 1rem;z-index:100;line-height:1.4;max-width:90%;margin:0 auto}
.clock-display{position:fixed;bottom:3rem;left:0;right:0;text-align:center;font-family:'JetBrains Mono',monospace;font-size:2rem;font-weight:700;color:#000;z-index:100;letter-spacing:.05em;display:none}
.clock-display.visible{display:block}
.fullscreen-mode .settings-panel,.fullscreen-mode header,.fullscreen-mode .controls,.fullscreen-mode .settings-toggle-btn,.fullscreen-mode .footer-text,.fullscreen-mode .clock-display{display:none}
.fullscreen-mode .timer-section{height:100vh}
body.fullscreen-active{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden}
body.fullscreen-active .container{position:fixed;top:0;left:0;width:100%;height:100%;z-index:9999}
body.fullscreen-active .fullscreen-btn{z-index:10000}
body.fullscreen-active .timer-section{height:100vh;display:flex;align-items:center;justify-content:center;padding:0}
body.fullscreen-active .timer-display{margin:0}
@keyframes slideDown{from{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}
@keyframes slideUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes pulse{0%,100%{filter:brightness(1)}50%{filter:brightness(1.3)}}
.timer-display.running{animation:pulse 2s ease-in-out infinite}
@media (max-width:768px){
body{-webkit-tap-highlight-color:transparent}
header{flex-direction:column;gap:1rem;padding:1.5rem 1rem}
.logo{font-size:1.5rem}
.mode-toggle{width:100%;justify-content:center;padding:.4rem}
.mode-btn{flex:1;padding:.6rem 1rem;font-size:.9rem;min-height:44px}
.timer-display{font-size:clamp(3rem,12vw,8rem);margin-bottom:2rem}
.settings-panel{padding:1.5rem 1rem;margin:0 1rem;max-width:calc(100% - 2rem);max-height:60vh;overflow-y:auto;overflow-x:hidden}
.settings-panel h3{font-size:1.3rem}
.time-inputs{gap:.5rem;min-width:0}
.time-input-wrapper{min-width:0}
input[type=number]{padding:.8rem .3rem;font-size:1rem;min-height:50px;-webkit-appearance:none;-moz-appearance:textfield;width:100%}
.controls{gap:.75rem;padding:0 1rem;flex-wrap:wrap}
.control-btn{padding:1rem 1.5rem;font-size:.9rem;min-height:50px;flex:1;min-width:120px}
.bg-selection{grid-template-columns:repeat(auto-fit,minmax(70px,1fr));gap:.75rem}
.bg-option{min-height:50px}
.color-selection{grid-template-columns:repeat(auto-fit,minmax(50px,1fr));gap:.75rem}
.color-option,.glow-color-option,.color-picker-btn{min-height:50px;min-width:50px}
.fullscreen-btn{width:56px;height:56px;font-size:1.3rem;bottom:1.5rem;right:1.5rem}
.setting-group{margin-bottom:1.5rem}
.custom-select{padding:.9rem;font-size:1rem;min-height:50px}
.toggle-label{width:70px;height:38px;min-height:38px}
.toggle-switch{width:30px;height:30px;top:3px;left:3px}
.toggle-checkbox:checked+.toggle-label .toggle-switch{left:calc(100% - 33px)}
.opacity-slider,input[type=range]{height:8px;min-height:44px}
.opacity-slider::-webkit-slider-thumb{width:28px;height:28px}
.opacity-slider::-moz-range-thumb{width:28px;height:28px}
.footer-text{font-size:.75rem;bottom:.5rem}
.clock-display{font-size:1.5rem;bottom:2.5rem}
}
@media (min-width:769px) and (max-width:1024px){
.timer-display{font-size:clamp(5rem,10vw,10rem)}
.settings-panel{max-width:600px;max-height:65vh}
.controls{gap:1.25rem}
}
@media (max-width:480px){
.timer-display{font-size:clamp(2.5rem,15vw,6rem)}
.settings-panel{padding:1.25rem 1rem;border-radius:12px;max-height:55vh}
.time-inputs{grid-template-columns:1fr 1fr 1fr;gap:.4rem}
input[type=number]{padding:.6rem .2rem;font-size:.95rem}
.control-btn{padding:.9rem 1.2rem;font-size:.85rem;min-width:100px}
.mode-btn{padding:.6rem .8rem;font-size:.85rem}
.bg-selection{grid-template-columns:repeat(3,1fr)}
.color-selection{grid-template-columns:repeat(4,1fr)}
.setting-group label{font-size:.8rem}
.settings-panel h3{font-size:1.1rem}
}
@media (max-height:500px) and (orientation:landscape){
header{padding:.75rem 1rem}
.timer-section{padding:.5rem 1rem}
.timer-display{font-size:clamp(2rem,8vh,5rem);margin-bottom:.75rem}
.settings-panel{padding:1rem;max-height:50vh;overflow-y:auto;-webkit-overflow-scrolling:touch}
.controls{margin-bottom:1rem}
.fullscreen-btn{bottom:.75rem;right:.75rem;width:48px;height:48px}
.setting-group{margin-bottom:1rem}
}
@media (max-width:360px){
.settings-panel{padding:1rem .75rem;max-height:50vh}
.time-inputs{gap:.3rem}
input[type=number]{padding:.5rem .1rem;font-size:.9rem}
.color-selection,.bg-selection{gap:.5rem}
.setting-group{margin-bottom:1.2rem}
}
@media (orientation:landscape) and (max-width:1024px){
.fullscreen-mode .timer-display{font-size:clamp(4rem,12vh,10rem);margin:0!important}
.fullscreen-mode .timer-section,body.fullscreen-active .timer-section{display:flex!important;align-items:center!important;justify-content:center!important;height:100vh!important;padding:0!important}
.fullscreen-mode .fullscreen-btn{bottom:1rem;right:1rem;width:50px;height:50px;font-size:1.2rem}
}
@supports (-webkit-touch-callout:none){
input[type=number],.custom-select,.control-btn,.mode-btn{-webkit-appearance:none;appearance:none}
.timer-display{-webkit-text-fill-color:inherit}
.settings-panel{-webkit-backdrop-filter:blur(10px)}
}
@media (hover:none) and (pointer:coarse){
*{-webkit-tap-highlight-color:rgba(0,0,0,.1)}
.control-btn,.mode-btn,.bg-option,.color-option,.glow-color-option,.color-picker-btn{min-height:50px;min-width:50px}
input[type=number]{min-height:50px}
.custom-select{min-height:50px}
}
</style>
</head>
<body>
<div class="background-layer">
<img id="backgroundImage" class="background-image" src="" alt="">
<div class="black-overlay" id="blackOverlay"></div>
</div>
<div class="container" id="mainContainer">
<header>
<div class="logo">TimeSnap</div>
<div class="mode-toggle">
<button class="mode-btn active" data-mode="timer">Timer</button>
<button class="mode-btn" data-mode="stopwatch">Cronometro</button>
</div>
</header>
<div class="timer-section">
<div id="timerDisplay" class="timer-display">00:20:00</div>
<div class="controls">
<button class="control-btn primary" id="startBtn">Avvia</button>
<button class="control-btn" id="pauseBtn" style="display:none">Pausa</button>
<button class="control-btn" id="resetBtn">Reset</button>
</div>
<button class="settings-toggle-btn" id="settingsToggleBtn">‚öôÔ∏è Impostazioni Timer</button>
<div class="settings-panel" id="settingsPanel" style="display:none">
<h3>Impostazioni Timer</h3>
<div class="setting-group" id="timerSettings">
<label>Imposta Tempo</label>
<div class="time-inputs">
<div class="time-input-wrapper"><label>Ore</label><input type="number" id="hoursInput" min="0" max="23" value="0"></div>
<div class="time-input-wrapper"><label>Min</label><input type="number" id="minutesInput" min="0" max="59" value="20"></div>
<div class="time-input-wrapper"><label>Sec</label><input type="number" id="secondsInput" min="0" max="59" value="0"></div>
</div>
</div>
<div class="setting-group">
<label>Font Timer</label>
<select id="fontSelect" class="custom-select">
<option value="'JetBrains Mono',monospace">JetBrains Mono (Default)</option>
<option value="'Orbitron',sans-serif">Orbitron (Futuristic)</option>
<option value="'Courier New',monospace">Courier New (Classic)</option>
<option value="'Roboto Mono',monospace">Roboto Mono (Clean)</option>
<option value="'Share Tech Mono',monospace">Share Tech Mono (Tech)</option>
<option value="'Anton',sans-serif">Anton (Bold)</option>
<option value="'Bebas Neue',sans-serif">Bebas Neue (Impact)</option>
<option value="'Audiowide',sans-serif">Audiowide (Digital)</option>
<option value="'Impact',sans-serif">Impact (Strong)</option>
<option value="'Arial Black',sans-serif">Arial Black (Heavy)</option>
<option value="'Verdana',sans-serif">Verdana (Round)</option>
<option value="'Georgia',serif">Georgia (Elegant)</option>
<option value="'Times New Roman',serif">Times New Roman (Classic)</option>
<option value="'Comic Sans MS',cursive">Comic Sans (Fun)</option>
</select>
</div>
<div class="setting-group">
<label>Colore Timer</label>
<div class="color-selection">
<div class="color-option active" data-color="#000000" style="background:#000"></div>
<div class="color-option" data-color="#ff0000" style="background:#ff0000"></div>
<div class="color-option" data-color="#43e97b" style="background:#43e97b"></div>
<div class="color-option" data-color="#f093fb" style="background:#f093fb"></div>
<div class="color-option" data-color="#ffffff" style="background:#fff"></div>
<div class="color-option" data-color="#ffd700" style="background:#ffd700"></div>
<label class="color-picker-btn" for="customColorPicker"><input type="color" id="customColorPicker" value="#000000"><span>+</span></label>
</div>
</div>
<div class="setting-group">
<label>Luminosit√† Numeri</label>
<div class="glow-controls">
<div class="toggle-wrapper">
<input type="checkbox" id="glowToggle" class="toggle-checkbox">
<label for="glowToggle" class="toggle-label"><span class="toggle-inner"></span><span class="toggle-switch"></span></label>
</div>
</div>
</div>
<div class="setting-group">
<label>Mostra Orologio</label>
<div class="glow-controls">
<div class="toggle-wrapper">
<input type="checkbox" id="clockToggle" class="toggle-checkbox">
<label for="clockToggle" class="toggle-label"><span class="toggle-inner"></span><span class="toggle-switch"></span></label>
</div>
</div>
</div>
<div class="setting-group" id="glowSettings" style="display:none">
<label>Intensit√† Luce <span id="glowIntensityValue">50</span>%</label>
<input type="range" id="glowIntensity" min="0" max="100" value="50" class="opacity-slider">
<label style="margin-top:1rem">Colore Luce</label>
<div class="color-selection">
<div class="glow-color-option active" data-glow="#000000" style="background:#000"></div>
<div class="glow-color-option" data-glow="#ff0000" style="background:#ff0000"></div>
<div class="glow-color-option" data-glow="#43e97b" style="background:#43e97b"></div>
<div class="glow-color-option" data-glow="#f093fb" style="background:#f093fb"></div>
<div class="glow-color-option" data-glow="#fff" style="background:#fff"></div>
<div class="glow-color-option" data-glow="#ffd700" style="background:#ffd700"></div>
<label class="color-picker-btn" for="customGlowPicker"><input type="color" id="customGlowPicker" value="#000000"><span>+</span></label>
</div>
</div>
<div class="setting-group">
<label>Colore Sfondo</label>
<div class="color-selection">
<div class="bg-color-option active" data-bgcolor="#C45CA8" style="background:#C45CA8" title="Rosa intenso"></div>
<div class="bg-color-option" data-bgcolor="#87CEEB" style="background:#87CEEB" title="Celeste"></div>
<div class="bg-color-option" data-bgcolor="#000000" style="background:#000" title="Nero"></div>
<div class="bg-color-option" data-bgcolor="#FFFFFF" style="background:#fff;border:1px solid #ccc" title="Bianco"></div>
<div class="bg-color-option" data-bgcolor="#FF0000" style="background:#FF0000" title="Rosso"></div>
<div class="bg-color-option" data-bgcolor="#0000FF" style="background:#0000FF" title="Blu"></div>
<div class="bg-color-option" data-bgcolor="#FFFF00" style="background:#FFFF00" title="Giallo"></div>
<div class="bg-color-option" data-bgcolor="#00FF00" style="background:#00FF00" title="Verde"></div>
<label class="color-picker-btn" for="customBgColorPicker" title="Colore personalizzato"><input type="color" id="customBgColorPicker" value="#C45CA8"><span>üé®</span></label>
</div>
</div>
<div class="setting-group">
<label>Opacit√† Sfondo</label>
<input type="range" id="bgOpacity" min="0" max="100" value="0" class="opacity-slider">
<div class="opacity-value"><span id="opacityValue">0</span>%</div>
</div>
<div class="setting-group">
<label>Carica Immagine</label>
<div class="image-upload-container">
<label class="image-upload-btn" for="fileUpload"><span class="upload-icon">üìÅ</span><span class="upload-text">Seleziona Immagine</span></label>
<input type="file" id="fileUpload" accept="image/png,image/jpeg,image/jpg,image/heic,image/heif,image/webp,image/gif,image/bmp,image/*">
</div>
</div>
</div>
</div>
</div>
<div class="clock-display" id="clockDisplay">00:00:00</div>
<div class="footer-text">For the people then want change the background of their timer - LU</div>
<button class="fullscreen-btn" id="fullscreenBtn" title="Modalit√† Fullscreen">‚õ∂</button>
<script>
let mode='timer',isRunning=!1,isPaused=!1,interval=null,timeInSeconds=0,targetTime=1200,startTimestamp=null,pausedTimeRemaining=0,initialTime=0;
const display=document.getElementById('timerDisplay'),startBtn=document.getElementById('startBtn'),pauseBtn=document.getElementById('pauseBtn'),resetBtn=document.getElementById('resetBtn'),fullscreenBtn=document.getElementById('fullscreenBtn'),mainContainer=document.getElementById('mainContainer'),timerSettings=document.getElementById('timerSettings'),hoursInput=document.getElementById('hoursInput'),minutesInput=document.getElementById('minutesInput'),secondsInput=document.getElementById('secondsInput'),backgroundImage=document.getElementById('backgroundImage'),fileUpload=document.getElementById('fileUpload'),fontSelect=document.getElementById('fontSelect'),bgOpacitySlider=document.getElementById('bgOpacity'),opacityValue=document.getElementById('opacityValue'),customColorPicker=document.getElementById('customColorPicker'),glowToggle=document.getElementById('glowToggle'),glowIntensity=document.getElementById('glowIntensity'),glowIntensityValue=document.getElementById('glowIntensityValue'),customGlowPicker=document.getElementById('customGlowPicker'),glowSettings=document.getElementById('glowSettings'),blackOverlay=document.getElementById('blackOverlay'),customBgColorPicker=document.getElementById('customBgColorPicker'),settingsToggleBtn=document.getElementById('settingsToggleBtn'),settingsPanel=document.getElementById('settingsPanel'),clockToggle=document.getElementById('clockToggle'),clockDisplay=document.getElementById('clockDisplay');
let currentTimerColor='#000',currentTimerFont="'JetBrains Mono',monospace",currentGlowColor='#000',glowEnabled=!1,glowIntensityLevel=50,settingsVisible=!1,clockVisible=!1,clockInterval=null;
document.querySelectorAll('.mode-btn').forEach(btn=>{
const handleModeChange=()=>{
document.querySelectorAll('.mode-btn').forEach(b=>b.classList.remove('active'));
btn.classList.add('active');
mode=btn.dataset.mode;
const logo=document.querySelector('.logo');
if(mode==='timer'){
logo.textContent='TimeSnap';
timerSettings.style.display='block';
settingsToggleBtn.innerHTML='‚öôÔ∏è Impostazioni Timer';
}else{
logo.textContent='CronoSnap';
timerSettings.style.display='none';
settingsToggleBtn.innerHTML='‚öôÔ∏è Impostazioni Cronometro';
timeInSeconds=130;
updateDisplay();
}
reset();
};
btn.addEventListener('click',handleModeChange);
btn.addEventListener('touchstart',e=>{e.preventDefault();handleModeChange();});
});
const toggleSettings=()=>{
settingsVisible=!settingsVisible;
settingsPanel.style.display=settingsVisible?'block':'none';
settingsToggleBtn.innerHTML=settingsVisible?'‚úñÔ∏è Chiudi Impostazioni':(mode==='timer'?'‚öôÔ∏è Impostazioni Timer':'‚öôÔ∏è Impostazioni Cronometro');
};
settingsToggleBtn.addEventListener('click',toggleSettings);
settingsToggleBtn.addEventListener('touchstart',e=>{e.preventDefault();toggleSettings();});
function formatTime(seconds){
const h=Math.floor(seconds/3600),m=Math.floor((seconds%3600)/60),s=seconds%60;
return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
}
function updateDisplay(){display.textContent=formatTime(timeInSeconds);}
function start(){
if(isRunning)return;
if(!isPaused&&mode==='timer'){
const hours=parseInt(hoursInput.value)||0,minutes=parseInt(minutesInput.value)||0,seconds=parseInt(secondsInput.value)||0;
targetTime=hours*3600+minutes*60+seconds;
timeInSeconds=targetTime;
initialTime=targetTime;
if(timeInSeconds===0){alert('Imposta un tempo maggiore di zero!');return;}
}
if(!isPaused&&mode==='stopwatch'){timeInSeconds=130;initialTime=130;}
isRunning=!0;isPaused=!1;
display.classList.add('running');
startBtn.style.display='none';
pauseBtn.style.display='inline-block';
startTimestamp=Date.now();
if(isPaused&&pausedTimeRemaining>0)startTimestamp=Date.now()-(initialTime-pausedTimeRemaining)*1000;
interval=setInterval(()=>{
const elapsed=Math.floor((Date.now()-startTimestamp)/1000);
if(mode==='timer'){
timeInSeconds=initialTime-elapsed;
if(timeInSeconds<=0){
timeInSeconds=0;updateDisplay();stop();playSound();
alert('Tempo scaduto!');return;
}
}else{timeInSeconds=initialTime+elapsed;}
updateDisplay();
},100);
}
function pause(){
if(!isRunning)return;
isRunning=!1;isPaused=!0;
display.classList.remove('running');
clearInterval(interval);
pausedTimeRemaining=timeInSeconds;
startBtn.style.display='inline-block';
pauseBtn.style.display='none';
startBtn.textContent='Riprendi';
}
function stop(){
isRunning=!1;isPaused=!1;
display.classList.remove('running');
clearInterval(interval);
startTimestamp=null;pausedTimeRemaining=0;
startBtn.style.display='inline-block';
pauseBtn.style.display='none';
startBtn.textContent='Avvia';
}
function reset(){
stop();
if(mode==='timer'){
const hours=parseInt(hoursInput.value)||0,minutes=parseInt(minutesInput.value)||0,seconds=parseInt(secondsInput.value)||0;
timeInSeconds=hours*3600+minutes*60+seconds;
initialTime=timeInSeconds;
}else{timeInSeconds=130;initialTime=130;}
updateDisplay();
}
function playSound(){
const audioContext=new(window.AudioContext||window.webkitAudioContext)();
const oscillator=audioContext.createOscillator();
const gainNode=audioContext.createGain();
oscillator.connect(gainNode);
gainNode.connect(audioContext.destination);
oscillator.frequency.value=800;
oscillator.type='sine';
gainNode.gain.setValueAtTime(.3,audioContext.currentTime);
gainNode.gain.exponentialRampToValueAtTime(.01,audioContext.currentTime+.5);
oscillator.start(audioContext.currentTime);
oscillator.stop(audioContext.currentTime+.5);
}
startBtn.addEventListener('click',start);
startBtn.addEventListener('touchstart',e=>{e.preventDefault();start();});
pauseBtn.addEventListener('click',pause);
pauseBtn.addEventListener('touchstart',e=>{e.preventDefault();pause();});
resetBtn.addEventListener('click',reset);
resetBtn.addEventListener('touchstart',e=>{e.preventDefault();reset();});
fontSelect.addEventListener('change',e=>{
currentTimerFont=e.target.value;
display.style.fontFamily=currentTimerFont;
updateClockStyle();
});
document.querySelectorAll('.color-option').forEach(option=>{
option.addEventListener('click',()=>{
document.querySelectorAll('.color-option').forEach(o=>o.classList.remove('active'));
option.classList.add('active');
currentTimerColor=option.dataset.color;
updateTimerColor();
});
});
customColorPicker.addEventListener('input',e=>{
currentTimerColor=e.target.value;
document.querySelectorAll('.color-option').forEach(o=>o.classList.remove('active'));
updateTimerColor();
});
function updateTimerColor(){
display.style.background='none';
display.style.webkitBackgroundClip='';
display.style.webkitTextFillColor='';
display.style.backgroundClip='';
display.style.color=currentTimerColor;
updateClockStyle();
}
bgOpacitySlider.addEventListener('input',e=>{
blackOverlay.style.opacity=e.target.value/100;
opacityValue.textContent=e.target.value;
});
glowToggle.addEventListener('change',e=>{
glowEnabled=e.target.checked;
glowSettings.style.display=glowEnabled?'block':'none';
updateTimerGlow();
});
glowIntensity.addEventListener('input',e=>{
glowIntensityLevel=e.target.value;
glowIntensityValue.textContent=e.target.value;
updateTimerGlow();
});
document.querySelectorAll('.glow-color-option').forEach(option=>{
option.addEventListener('click',()=>{
document.querySelectorAll('.glow-color-option').forEach(o=>o.classList.remove('active'));
option.classList.add('active');
currentGlowColor=option.dataset.glow;
updateTimerGlow();
});
});
customGlowPicker.addEventListener('input',e=>{
currentGlowColor=e.target.value;
document.querySelectorAll('.glow-color-option').forEach(o=>o.classList.remove('active'));
updateTimerGlow();
});
function updateTimerGlow(){
if(!glowEnabled){
display.style.textShadow='none';
display.style.filter='none';
updateClockStyle();
return;
}
const intensity=glowIntensityLevel/100,baseGlow=80*intensity,mediumGlow=100*intensity,strongGlow=120*intensity;
const hexToRgba=(hex,alpha)=>{
const r=parseInt(hex.slice(1,3),16),g=parseInt(hex.slice(3,5),16),b=parseInt(hex.slice(5,7),16);
return `rgba(${r},${g},${b},${alpha})`;
};
const glowColor1=hexToRgba(currentGlowColor,.5*intensity),glowColor2=hexToRgba(currentGlowColor,.3*intensity);
display.style.textShadow=`0 0 ${baseGlow}px ${glowColor1},0 0 ${mediumGlow}px ${glowColor2},0 0 ${strongGlow}px ${glowColor2}`;
updateClockStyle();
}
document.querySelectorAll('.bg-color-option').forEach(option=>{
option.addEventListener('click',()=>{
document.querySelectorAll('.bg-color-option').forEach(o=>o.classList.remove('active'));
option.classList.add('active');
const bgColor=option.dataset.bgcolor;
backgroundImage.src='';
backgroundImage.style.opacity='0';
document.documentElement.style.setProperty('--dynamic-bg-color',bgColor);
document.querySelector('.background-layer').style.background=bgColor;
});
});
customBgColorPicker.addEventListener('input',e=>{
document.querySelectorAll('.bg-color-option').forEach(o=>o.classList.remove('active'));
backgroundImage.src='';
backgroundImage.style.opacity='0';
document.documentElement.style.setProperty('--dynamic-bg-color',e.target.value);
document.querySelector('.background-layer').style.background=e.target.value;
});
fileUpload.addEventListener('change',e=>{
const file=e.target.files[0];
if(file){
console.log('File selezionato:',file.name,'Tipo:',file.type,'Dimensione:',file.size);
const validTypes=['image/png','image/jpeg','image/jpg','image/gif','image/webp','image/bmp','image/heic','image/heif'];
const isValidType=validTypes.some(type=>file.type.includes(type.split('/')[1]))||file.type.startsWith('image/');
if(!isValidType&&!file.name.match(/\.(jpg|jpeg|png|gif|webp|bmp|heic|heif)$/i)){
alert('Formato file non supportato. Usa JPG, PNG, HEIC o altri formati immagine.');
return;
}
if(file.name.toLowerCase().endsWith('.heic')||file.name.toLowerCase().endsWith('.heif')){
alert('Nota: Le foto HEIC da iPhone potrebbero non funzionare su tutti i browser. Prova a convertirle in JPG dalle impostazioni iPhone o usa Safari.');
}
if(file.size>5*1024*1024){
console.log('File troppo grande, compressione in corso...');
compressImage(file);
}else{loadImage(file);}
}
});
function loadImage(file){
const reader=new FileReader();
reader.onload=event=>{
console.log('Immagine caricata con successo');
document.querySelectorAll('.bg-color-option').forEach(o=>o.classList.remove('active'));
backgroundImage.src=event.target.result;
backgroundImage.style.opacity='1';
backgroundImage.onerror=()=>{
console.error('Errore nel caricamento immagine');
alert('Errore nel caricamento dell\'immagine. Prova con un file pi√π piccolo o in formato JPG/PNG.');
backgroundImage.src='';
backgroundImage.style.opacity='0';
};
};
reader.onerror=error=>{
console.error('Errore lettura file:',error);
alert('Errore nella lettura del file. Riprova.');
};
reader.readAsDataURL(file);
}
function compressImage(file){
const reader=new FileReader();
reader.onload=e=>{
const img=new Image();
img.onload=()=>{
const canvas=document.createElement('canvas');
const ctx=canvas.getContext('2d');
let width=img.width,height=img.height;
const maxSize=1920;
if(width>maxSize||height>maxSize){
if(width>height){
height=(height/width)*maxSize;
width=maxSize;
}else{
width=(width/height)*maxSize;
height=maxSize;
}
}
canvas.width=width;
canvas.height=height;
ctx.drawImage(img,0,0,width,height);
canvas.toBlob(blob=>{
console.log('Immagine compressa da',file.size,'a',blob.size,'bytes');
const compressedFile=new File([blob],file.name,{type:'image/jpeg'});
loadImage(compressedFile);
},'image/jpeg',.8);
};
img.onerror=()=>{
console.error('Errore caricamento immagine per compressione');
alert('Impossibile processare l\'immagine. Prova con un altro file.');
};
img.src=e.target.result;
};
reader.readAsDataURL(file);
}
function updateClock(){
const now=new Date();
const hours=String(now.getHours()).padStart(2,'0');
const minutes=String(now.getMinutes()).padStart(2,'0');
const seconds=String(now.getSeconds()).padStart(2,'0');
clockDisplay.textContent=`${hours}:${minutes}:${seconds}`;
}
function updateClockStyle(){
if(!clockVisible)return;
clockDisplay.style.fontFamily=currentTimerFont;
clockDisplay.style.color=currentTimerColor;
if(glowEnabled){
const intensity=glowIntensityLevel/100,baseGlow=80*intensity,mediumGlow=100*intensity,strongGlow=120*intensity;
const hexToRgba=(hex,alpha)=>{
const r=parseInt(hex.slice(1,3),16),g=parseInt(hex.slice(3,5),16),b=parseInt(hex.slice(5,7),16);
return `rgba(${r},${g},${b},${alpha})`;
};
const glowColor1=hexToRgba(currentGlowColor,.5*intensity),glowColor2=hexToRgba(currentGlowColor,.3*intensity);
clockDisplay.style.textShadow=`0 0 ${baseGlow}px ${glowColor1},0 0 ${mediumGlow}px ${glowColor2},0 0 ${strongGlow}px ${glowColor2}`;
}else{clockDisplay.style.textShadow='none';}
}
clockToggle.addEventListener('change',e=>{
clockVisible=e.target.checked;
if(clockVisible){
clockDisplay.classList.add('visible');
updateClock();
updateClockStyle();
clockInterval=setInterval(updateClock,1000);
}else{
clockDisplay.classList.remove('visible');
if(clockInterval){
clearInterval(clockInterval);
clockInterval=null;
}
}
});
const handleFullscreen=()=>{
if(mainContainer.classList.contains('fullscreen-mode')){
mainContainer.classList.remove('fullscreen-mode');
document.body.classList.remove('fullscreen-active');
if(screen.orientation&&screen.orientation.unlock)screen.orientation.unlock();
}else{
mainContainer.classList.add('fullscreen-mode');
document.body.classList.add('fullscreen-active');
settingsVisible=!1;
settingsPanel.style.display='none';
settingsToggleBtn.innerHTML=mode==='timer'?'‚öôÔ∏è Impostazioni Timer':'‚öôÔ∏è Impostazioni Cronometro';
if(document.documentElement.requestFullscreen&&!iOS()){
document.documentElement.requestFullscreen().catch(err=>console.log('Fullscreen non supportato:',err));
}
if(screen.orientation&&screen.orientation.lock){
screen.orientation.lock('landscape').catch(err=>console.log('Orientamento lock non supportato:',err));
}
}
};
function iOS(){
return['iPad Simulator','iPhone Simulator','iPod Simulator','iPad','iPhone','iPod'].includes(navigator.platform)||(navigator.userAgent.includes("Mac")&&"ontouchend" in document);
}
fullscreenBtn.addEventListener('click',handleFullscreen);
fullscreenBtn.addEventListener('touchstart',e=>{e.preventDefault();handleFullscreen();});
document.addEventListener('fullscreenchange',()=>{
if(!document.fullscreenElement){
mainContainer.classList.remove('fullscreen-mode');
document.body.classList.remove('fullscreen-active');
}
});
updateDisplay();
updateTimerColor();
updateTimerGlow();
document.querySelector('.background-layer').style.background='#C45CA8';
backgroundImage.src='';
backgroundImage.style.opacity='0';
blackOverlay.style.opacity=0;
</script>
</body>
</html>
